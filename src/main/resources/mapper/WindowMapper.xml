<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.roymark.queue.dao.WindowMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.roymark.queue.entity.Window">
        <id column="window_hidden_id" property="windowHiddenId" />
        <result column="window_id" property="windowId" />
        <result column="window_name" property="windowName" />
        <result column="window_department" property="windowDepartment" />
        <result column="window_event" property="windowEvent" />
        <result column="floor_hidden_id" property="floorHiddenId" />
        <result column="floor_id" property="floorId" />
        <result column="window_action_analysis" property="windowActionAnalysis" />
        <result column="window_nine_palaces" property="windowNinePalaces" />
        <result column="cam_hidden_id" property="camHiddenId" />
        <result column="cam_id" property="camId" />
        <result column="floor_name" property="floorName" />
    </resultMap>


    <!-- 通用查询结果列 -->
    <select id="getAllWindow" resultMap="BaseResultMap">
        SELECT * FROM (br_window LEFT JOIN br_floor ON br_window.floor_hidden_id=br_floor.floor_hidden_id)
        LEFT JOIN br_cam ON br_window.cam_hidden_id=br_cam.cam_hidden_id
    </select>

    <select id="getWindowByHiddenId" parameterType="long" resultMap="BaseResultMap">
        SELECT * FROM (br_window LEFT JOIN br_floor ON br_window.floor_hidden_id=br_floor.floor_hidden_id)
            LEFT JOIN br_cam ON br_window.cam_hidden_id=br_cam.cam_hidden_id
        WHERE window_hidden_id = #{VALUE }
    </select>

    <select id="page" resultMap="BaseResultMap">
        SELECT * FROM (br_window LEFT JOIN br_floor ON br_window.floor_hidden_id=br_floor.floor_hidden_id)
            LEFT JOIN br_cam ON br_window.cam_hidden_id=br_cam.cam_hidden_id
        ${ew.customSqlSegment}
    </select>
</mapper>
